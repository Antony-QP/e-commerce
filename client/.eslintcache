[{"/Users/antonyparker/Desktop/react_ecommerce/ecoomerce_website/client/src/index.js":"1","/Users/antonyparker/Desktop/react_ecommerce/ecoomerce_website/client/src/reportWebVitals.js":"2","/Users/antonyparker/Desktop/react_ecommerce/ecoomerce_website/client/src/App.js":"3","/Users/antonyparker/Desktop/react_ecommerce/ecoomerce_website/client/src/pages/auth/Register.js":"4","/Users/antonyparker/Desktop/react_ecommerce/ecoomerce_website/client/src/pages/Home.js":"5","/Users/antonyparker/Desktop/react_ecommerce/ecoomerce_website/client/src/pages/auth/Login.js":"6","/Users/antonyparker/Desktop/react_ecommerce/ecoomerce_website/client/src/components/nav/Header.js":"7","/Users/antonyparker/Desktop/react_ecommerce/ecoomerce_website/client/src/firebase.js":"8","/Users/antonyparker/Desktop/react_ecommerce/ecoomerce_website/client/src/pages/auth/RegisterComplete.js":"9","/Users/antonyparker/Desktop/react_ecommerce/ecoomerce_website/client/src/reducers/index.js":"10","/Users/antonyparker/Desktop/react_ecommerce/ecoomerce_website/client/src/reducers/userReducer.js":"11","/Users/antonyparker/Desktop/react_ecommerce/ecoomerce_website/client/src/pages/auth/ForgotPassword.js":"12","/Users/antonyparker/Desktop/react_ecommerce/ecoomerce_website/client/src/actions/auth.js":"13"},{"size":666,"mtime":1607416136266,"results":"14","hashOfConfig":"15"},{"size":362,"mtime":1606907712344,"results":"16","hashOfConfig":"15"},{"size":1815,"mtime":1607695970647,"results":"17","hashOfConfig":"15"},{"size":1701,"mtime":1607506540070,"results":"18","hashOfConfig":"15"},{"size":150,"mtime":1606995314353,"results":"19","hashOfConfig":"15"},{"size":4032,"mtime":1607693353023,"results":"20","hashOfConfig":"15"},{"size":1800,"mtime":1607692965617,"results":"21","hashOfConfig":"15"},{"size":585,"mtime":1607423446507,"results":"22","hashOfConfig":"15"},{"size":3103,"mtime":1607693378922,"results":"23","hashOfConfig":"15"},{"size":172,"mtime":1607415638107,"results":"24","hashOfConfig":"15"},{"size":249,"mtime":1607416034994,"results":"25","hashOfConfig":"15"},{"size":1591,"mtime":1607679574530,"results":"26","hashOfConfig":"15"},{"size":466,"mtime":1607695947801,"results":"27","hashOfConfig":"15"},{"filePath":"28","messages":"29","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},"27c5wi",{"filePath":"31","messages":"32","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"33","messages":"34","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"35","messages":"36","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"37","usedDeprecatedRules":"30"},{"filePath":"38","messages":"39","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"40","messages":"41","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"42","usedDeprecatedRules":"30"},{"filePath":"43","messages":"44","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"45","messages":"46","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"47","messages":"48","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"49","usedDeprecatedRules":"30"},{"filePath":"50","messages":"51","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"52","messages":"53","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"54","messages":"55","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"56","usedDeprecatedRules":"30"},{"filePath":"57","messages":"58","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/Users/antonyparker/Desktop/react_ecommerce/ecoomerce_website/client/src/index.js",[],["59","60"],"/Users/antonyparker/Desktop/react_ecommerce/ecoomerce_website/client/src/reportWebVitals.js",[],"/Users/antonyparker/Desktop/react_ecommerce/ecoomerce_website/client/src/App.js",["61"],"/Users/antonyparker/Desktop/react_ecommerce/ecoomerce_website/client/src/pages/auth/Register.js",["62"],"import React, { useState, useEffect } from \"react\";\nimport { auth } from \"../../firebase.js\";\nimport { toast } from \"react-toastify\";\nimport { useSelector } from \"react-redux\";\n\nexport const Register = ({ history }) => {\n  const [email, setEmail] = useState(\"\");\n\n  const { user } = useSelector((state) => ({ ...state }));\n\n  useEffect(() => {\n    if (user && user.token) {\n      history.push(\"/\");\n    }\n  }, [user]);\n\n  const handleSubmit = async (e) => {\n    console.log(process.env.REACT_APP_REGISTER_REDIRECT_URL);\n    e.preventDefault();\n    const config = {\n      url: process.env.REACT_APP_REGISTER_REDIRECT_URL,\n      handleCodeInApp: true,\n    };\n\n    await auth.sendSignInLinkToEmail(email, config);\n\n    toast.success(\n      `Confirmation email has beeb sent to ${email}. Click the link to complete you registration`\n    );\n\n    // Save email in local storage\n    window.localStorage.setItem(\"emailForRegistration\", email);\n\n    // Clear state\n    setEmail(\"\");\n  };\n\n  const registerForm = () => (\n    <form onSubmit={handleSubmit}>\n      <input\n        type='email'\n        className='form-control'\n        id=''\n        value={email}\n        onChange={(e) => setEmail(e.target.value)}\n        autoFocus\n        placeholder='Please enter your email address to register'\n      />\n      <br />\n      <button type='submit' className='btn btn-raised'>\n        REGISTER {email && \"/ \" + email.toUpperCase()}\n      </button>\n    </form>\n  );\n\n  return (\n    <div className='container p-5'>\n      <div className='row'>\n        <div className='col-md-6 offset-md-3'>\n          <h4>Register</h4>\n          {registerForm()}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Register;\n","/Users/antonyparker/Desktop/react_ecommerce/ecoomerce_website/client/src/pages/Home.js",[],"/Users/antonyparker/Desktop/react_ecommerce/ecoomerce_website/client/src/pages/auth/Login.js",["63","64"],"import React, { useState, useEffect } from \"react\";\nimport { auth, googleAuthProvider } from \"../../firebase.js\";\nimport { toast } from \"react-toastify\";\nimport { Button } from \"antd\";\nimport { MailOutlined, GoogleOutlined } from \"@ant-design/icons\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\nimport { createOrUpdateUser } from '../../actions/auth'\nimport axios from \"axios\";\n\nexport const Login = ({ history }) => {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n\n  const { user } = useSelector((state) => ({ ...state }));\n\n  useEffect(() => {\n    if (user && user.token) {\n      history.push(\"/\");\n    }\n  }, [user]);\n\n  const dispatch = useDispatch();\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    try {\n      const result = await auth.signInWithEmailAndPassword(email, password);\n\n      const { user } = result;\n      const idTokenResult = await user.getIdTokenResult();\n      createOrUpdateUser(idTokenResult.token)\n        .then((res) => {\n          dispatch({\n            type: \"LOGGED_IN_USER\",\n            payload: {\n              email: res.data.email,\n              name: res.data.name,\n              role: res.data.role,\n              token: idTokenResult.token,\n              _id: res.data._id,\n            },\n          });\n        })\n        .catch();\n\n      history.push(\"/\");\n    } catch (err) {\n      console.log(err);\n      toast.error(err.message);\n      setLoading(false);\n    }\n  };\n\n  const googleLogin = async () => {\n    auth\n      .signInWithPopup(googleAuthProvider)\n      .then(async (result) => {\n        const {user} = result;\n        const idTokenResult = await user.getIdTokenResult();\n        createOrUpdateUser(idTokenResult.token)\n          .then((res) => {\n            dispatch({\n              type: \"LOGGED_IN_USER\",\n              payload: {\n                email: res.data.email,\n                name: res.data.name,\n                role: res.data.role,\n                token: idTokenResult.token,\n                _id: res.data._id,\n              },\n            });\n          })\n          .catch();\n        history.push(\"/\");\n      })\n      .catch((err) => {\n        console.log(err);\n        toast.error(err.message);\n      });\n  };\n\n  const LoginForm = () => (\n    <form onSubmit={handleSubmit}>\n      <div className='form-group'>\n        <input\n          type='email'\n          className='form-control'\n          id=''\n          value={email}\n          onChange={(e) => setEmail(e.target.value)}\n          autoFocus\n          placeholder='Please enter your email address to register'\n        />\n      </div>\n      <div className='form-group'>\n        <input\n          type='password'\n          className='form-control'\n          id=''\n          value={password}\n          onChange={(e) => setPassword(e.target.value)}\n          placeholder='Please enter your password'\n        />\n      </div>\n      <br />\n      <Button\n        onClick={handleSubmit}\n        type='primary'\n        block\n        shape='round'\n        icon={<MailOutlined />}\n        size='large'\n        disabled={!email || password.length < 6}>\n        Login with email/password\n      </Button>\n    </form>\n  );\n\n  return (\n    <div className='container p-5'>\n      <div className='row'>\n        <div className='col-md-6 offset-md-3'>\n          {loading ? <h4 className='text-danger'>Loading</h4> : <h4>Login</h4>}\n          {LoginForm()}\n\n          {/* Login with google */}\n\n          <Button\n            onClick={googleLogin}\n            className='mb-3'\n            type='danger'\n            block\n            shape='round'\n            icon={<GoogleOutlined />}\n            size='large'>\n            Login with Google\n          </Button>\n\n          <Link to='/forgot/password' className='float-right text-danger'>\n            Forgot password\n          </Link>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Login;\n","/Users/antonyparker/Desktop/react_ecommerce/ecoomerce_website/client/src/components/nav/Header.js",[],"/Users/antonyparker/Desktop/react_ecommerce/ecoomerce_website/client/src/firebase.js",[],"/Users/antonyparker/Desktop/react_ecommerce/ecoomerce_website/client/src/pages/auth/RegisterComplete.js",["65","66"],"import React, { useState, useEffect } from \"react\";\nimport { auth } from \"../../firebase.js\";\nimport { toast } from \"react-toastify\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { createOrUpdateUser } from '../../actions/auth'\nimport axios from \"axios\";\n\nexport const RegisterComplete = ({ history }) => {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n\n  const { user } = useSelector((state) => ({ ...state }));\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    setEmail(window.localStorage.getItem(\"emailForRegistration\"));\n    // console.log(window.location.href)\n    // console.log(window.localStorage.getItem('emailForRegistration'))\n  }, []);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n\n    // Form validation\n    if (!email || !password) {\n      toast.error(\"Email and Password are required\");\n      return;\n    }\n\n    if (password.length < 6) {\n      toast.error(\"Password must be at least 6 characters long\");\n      return;\n    }\n\n    try {\n      const result = await auth.signInWithEmailLink(\n        email,\n        window.location.href\n      );\n      console.log(result);\n\n      if (result.user.emailVerified) {\n        // Remove user email from localstorage\n        window.localStorage.removeItem(\"emailForRegistration\");\n        // Get user id token\n        let user = auth.currentUser;\n        await user.updatePassword(password);\n        const idTokenResult = await user.getIdTokenResult();\n        // populate user in redux store (later)\n        console.log(\"user\", user, \"idTokenResult\", idTokenResult);\n\n        createOrUpdateUser(idTokenResult.token)\n          .then((res) => {\n            dispatch({\n              type: \"LOGGED_IN_USER\",\n              payload: {\n                email: res.data.email,\n                name: res.data.name,\n                role: res.data.role,\n                token: idTokenResult.token,\n                _id: res.data._id,\n              },\n            });\n          })\n          .catch();\n\n        // Redirect\n        history.push(\"/\");\n      }\n    } catch (err) {\n      console.log(err);\n      toast.error(err.message);\n    }\n  };\n\n  const completeRegisterForm = () => (\n    <form onSubmit={handleSubmit}>\n      <input\n        type='email'\n        className='form-control'\n        id=''\n        value={email}\n        onChange={(e) => setEmail(e.target.value)}\n        autoFocus\n      />\n      <input\n        type='password'\n        className='form-control'\n        id=''\n        value={password}\n        onChange={(e) => setPassword(e.target.value)}\n        placeholder='Enter password'\n        autoFocus\n      />\n      <br />\n      <button type='submit' className='btn btn-raised'>\n        COMPLETE REGISTRATION{email && \"/ \" + email.toUpperCase()}\n      </button>\n    </form>\n  );\n\n  return (\n    <div className='container p-5'>\n      <div className='row'>\n        <div className='col-md-6 offset-md-3'>\n          <h4>Register Complete</h4>\n          {completeRegisterForm()}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default RegisterComplete;\n","/Users/antonyparker/Desktop/react_ecommerce/ecoomerce_website/client/src/reducers/index.js",[],"/Users/antonyparker/Desktop/react_ecommerce/ecoomerce_website/client/src/reducers/userReducer.js",[],"/Users/antonyparker/Desktop/react_ecommerce/ecoomerce_website/client/src/pages/auth/ForgotPassword.js",["67"],"import React, { useState, useEffect } from \"react\";\nimport { auth } from \"../../firebase.js\";\nimport { toast } from \"react-toastify\";\nimport { useSelector } from \"react-redux\";\n\nexport const ForgotPassword = ({ history }) => {\n  const [email, setEmail] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n\n  const { user } = useSelector((state) => ({ ...state }));\n\n  useEffect(() => {\n      if(user && user.token){\n          history.push('/')\n      }\n  }, [user])\n\n  const handleSubmit = async(e) => {\n    e.preventDefault();\n    setLoading(true)\n\n    const config = {\n        url : process.env.REACT_APP_FORGOT_PASSWORD_REDIRECT,\n        handleCodeInApp : true\n    }\n\n    await auth.sendPasswordResetEmail(email, config)\n    .then(() => {\n        setEmail('')\n        setLoading(false)\n        toast.success('Check your email for password reset link')\n\n    })\n    .catch((error) => {\n        setLoading(false)\n        toast.error(error.message)\n    })\n  };\n\n  return (\n    <div className='container col-md-6 offset-md-3 p-5'>\n      {loading ? (\n        <h4 className='text-danger'>Loading</h4>\n      ) : (\n        <h4>Forgot Password</h4>\n      )}\n\n      <form onSubmit={handleSubmit}>\n        <input\n          type='email'\n          className='form-control'\n          value={email}\n          onChange={(e) => setEmail(e.target.value)}\n          placeholder='Please enter email address'\n          autoFocus\n        />\n        <br />\n\n        <button className=\"btn btn-raised\" disabled={!email}>Submit</button>\n      </form>\n    </div>\n  );\n};\n\nexport default ForgotPassword;\n","/Users/antonyparker/Desktop/react_ecommerce/ecoomerce_website/client/src/actions/auth.js",[],{"ruleId":"68","replacedBy":"69"},{"ruleId":"70","replacedBy":"71"},{"ruleId":"72","severity":1,"message":"73","line":49,"column":6,"nodeType":"74","endLine":49,"endColumn":8,"suggestions":"75"},{"ruleId":"72","severity":1,"message":"76","line":15,"column":6,"nodeType":"74","endLine":15,"endColumn":12,"suggestions":"77"},{"ruleId":"78","severity":1,"message":"79","line":9,"column":8,"nodeType":"80","messageId":"81","endLine":9,"endColumn":13},{"ruleId":"72","severity":1,"message":"76","line":22,"column":6,"nodeType":"74","endLine":22,"endColumn":12,"suggestions":"82"},{"ruleId":"78","severity":1,"message":"79","line":6,"column":8,"nodeType":"80","messageId":"81","endLine":6,"endColumn":13},{"ruleId":"78","severity":1,"message":"83","line":12,"column":11,"nodeType":"80","messageId":"81","endLine":12,"endColumn":15},{"ruleId":"72","severity":1,"message":"76","line":16,"column":6,"nodeType":"74","endLine":16,"endColumn":12,"suggestions":"84"},"no-native-reassign",["85"],"no-negated-in-lhs",["86"],"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'dispatch'. Either include it or remove the dependency array.","ArrayExpression",["87"],"React Hook useEffect has a missing dependency: 'history'. Either include it or remove the dependency array.",["88"],"no-unused-vars","'axios' is defined but never used.","Identifier","unusedVar",["89"],"'user' is assigned a value but never used.",["90"],"no-global-assign","no-unsafe-negation",{"desc":"91","fix":"92"},{"desc":"93","fix":"94"},{"desc":"93","fix":"95"},{"desc":"93","fix":"96"},"Update the dependencies array to be: [dispatch]",{"range":"97","text":"98"},"Update the dependencies array to be: [history, user]",{"range":"99","text":"100"},{"range":"101","text":"100"},{"range":"102","text":"100"},[1345,1347],"[dispatch]",[410,416],"[history, user]",[758,764],[470,476]]